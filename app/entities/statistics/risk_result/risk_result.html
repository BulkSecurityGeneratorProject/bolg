<div class="rm_content_header">
    <h1 class="title">
        统计分析
    </h1>

    <div class="subtitle rm_conditionlist">
        <div class="rm_conditionlist_item">
            <a ui-sref="riskTrend" class="rm_condition">风险走势</a>
            <a ui-sref="riskResult" class="rm_condition active">风险结果</a>
        </div>
    </div>
</div>

<div cg-busy="getStrategisPromise">
    <div class="ud_content_condition_B">
        <div class="conditions-wrapper">
            <div class="conditions condition-row">
                <div class="condition">
                    <div class="condition-hd" ng-click="onClickSelector($event)">
                        <span ng-show="chosenDateRangeName==''" class="text">时间范围</span>
                        <span ng-show="chosenDateRangeName!=''" class="text">{{chosenDateRangeName}}</span>
                        <!--<span class="glyphicon glyphicon-triangle-bottom"></span>-->
                        <span class="arrow-down"></span>
                    </div>
                    <div class="condition-bd">
                        <div class="title">时间范围</div>
                        <a ng-repeat="selectTime in selectTimes"
                           ng-click="setDateRange(selectTime)"
                           ng-class="{active: selectTimes.highlight == selectTime.value}"
                           class="item">
                            {{selectTime.name}}
                        </a>
                    </div>
                </div>

                <div class="condition">
                    <!--<div class="title">时间范围：</div>-->
                    <div class="itemgroup">

                        <div class="ud_datepicker">
                            <input type="text" class="item_ipt"
                                   datepicker-popup="{{format}}"
                                   ng-model="beginDate"
                                   is-open="opened1"
                                   min-date="minDate"
                                   max-date="endDate"
                                   datepicker-options="dateOptions"
                                   show-button-bar="false"
                                   ng-click="openBeginDate($event)"
                                   placeholder="请选择日期"
                                   ng-change="validateDate()"
                                   readonly/>
                            <span class="item_hyphen">-</span>
                            <input type="text" class="item_ipt"
                                   datepicker-popup="{{format}}"
                                   ng-model="endDate"
                                   is-open="opened2"
                                   min-date="beginDate"
                                   max-date="maxDate1"
                                   datepicker-options="dateOptions"
                                   show-button-bar="false"
                                   ng-click="openEndDate($event)"
                                   placeholder="请选择日期"
                                   ng-change="validateDate()"
                                   readonly/>
                        </div>
                        <!--<input type="button" class="rm_btn_sm rm_btn_primary item_ipt" ng-click="getRiskResultStatisticsByStrategyAndTime()" value="搜索"/>-->
                        <span ng-class="{ud_text_error: tip_name.invalid, ud_text_correct: !(tip_name.invalid)}" class="item_hyphen">{{tip_name.info}}</span>
                    </div>
                </div>
            </div>

            <div class="conditions condition-row">
                <div class="condition">
                    <div class="condition-hd" ng-click="onClickSelector($event)">
                        <span ng-show="chosenDistributionName==''" class="text">分布选择</span>
                        <span ng-show="chosenDistributionName!=''" class="text">{{chosenDistributionName}}</span>
                        <!--<span class="glyphicon glyphicon-triangle-bottom"></span>-->
                        <span class="arrow-down"></span>
                    </div>
                    <div class="condition-bd">
                        <div class="title">分布选择</div>
                        <a ng-repeat="item in distributions"
                           ng-click="setDistribution(item)" class="item"
                           ng-class="{active: distribution==item.value}">{{item.name}}</a>
                    </div>
                </div>

                <div class="condition" ng-show="showStrategyList">
                    <div class="condition-hd" ng-click="onClickSelector($event)">
                        <span ng-show="chosenStrategyName==''" class="text">我的攻略</span>
                        <span ng-show="chosenStrategyName!=''" class="text">{{chosenStrategyName}}</span>
                        <!--<span class="glyphicon glyphicon-triangle-bottom"></span>-->
                        <span class="arrow-down"></span>
                    </div>
                    <div class="condition-bd">
                        <div class="title">我的攻略</div>
                        <a ng-repeat="Strategy in StrategyList"
                           ng-click="setStrategy(Strategy)" class="item"
                           ng-class="{active: riskResultDTO.strategyInstanceCode == Strategy.code}">
                            {{Strategy.name}}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!--
    <div class="ud_content_condition">
        <div class="conditions">
            <div class="condition">
                <div class="title">分布选择：</div>
                <div class="itemgroup">
                    <a ng-repeat="item in distributions"
                       ng-click="getHitDistributeSelect(item.value)" class="item"
                       ng-class="{active: distribution==item.value}">{{item.name}}</a>
                </div>
            </div>

            <div class="condition" ng-show="showStrategyList">
                <div class="title">我的攻略：</div>
                <div class="itemgroup">
                    <a ng-repeat="Strategy in StrategyList"
                       ng-click="getRiskResultStatisticsByStrategyAndStrategyCode(Strategy)" class="item"
                       ng-class="{active: riskResultDTO.strategyInstanceCode == Strategy.code}">
                        {{Strategy.name}}
                    </a>
                </div>
            </div>

            <div class="condition">
                <div class="title">时间范围：</div>
                <div class="itemgroup">

                    <div class="ud_datepicker">
                        <input type="text" class="item_ipt"
                               datepicker-popup="{{format}}"
                               ng-model="beginDate"
                               is-open="opened1"
                               min-date="minDate"
                               max-date="endDate"
                               datepicker-options="dateOptions"
                               show-button-bar="false"
                               ng-click="openBeginDate($event)"
                               placeholder="请选择日期"
                               ng-change="validateDate()"
                               readonly/>
                        <span class="item_hyphen">-</span>
                        <input type="text" class="item_ipt"
                               datepicker-popup="{{format}}"
                               ng-model="endDate"
                               is-open="opened2"
                               min-date="beginDate"
                               max-date="maxDate1"
                               datepicker-options="dateOptions"
                               show-button-bar="false"
                               ng-click="openEndDate($event)"
                               placeholder="请选择日期"
                               ng-change="validateDate()"
                               readonly/>
                    </div>
                    &lt;!&ndash;<input type="button" class="rm_btn_sm rm_btn_primary item_ipt" ng-click="getRiskResultStatisticsByStrategyAndTime()" value="搜索"/>&ndash;&gt;
                    <a ng-repeat="selectTime in selectTimes"
                       ng-click="getRiskResultStatisticsByStrategyAndSelectTime(selectTime)"
                       ng-class="{active: selectTimes.highlight == selectTime.value}"
                       class="item">
                        {{selectTime.name}}
                    </a>
                    <span ng-class="{ud_text_error: tip_name.invalid, ud_text_correct: !(tip_name.invalid)}" class="item_hyphen">{{tip_name.info}}</span>
                </div>
            </div>
        </div>
    </div>
-->

    <div class="ud_content_result">
        <p ng-if="warnFlag" class="rm_text_error rm_center">请先选择分布类型</p>
        <table ng-if="flag && !warnFlag" class="ud_table ud_table_C rm_table_bordered">
            <thead>
            <tr>
                <th>场景</th>
                <th>锦囊</th>
                <!--<th>命中规则名称</th>
                <th>命中规则次数（次）</th>-->
                <th>命中锦囊的风险事件个数</th>
            </tr>
            </thead>
            <!--<tbody ng-repeat="riskResult in riskScenarioListResults">
            <tr>
                <td rowspan="{{riskResult.solutionHitDistribute.length+1}}">{{riskResult.scenarioInstanceName}}</td>
            </tr>
            <tr ng-repeat="solutionHitDistributes in riskResult.solutionHitDistribute">
                <td>{{solutionHitDistributes.solutionInstanceName}}</td>
                <td class="tdis">
                    <div class="tdi" ng-repeat="ruleHitDistributes in solutionHitDistributes.ruleHitDistribute">
                        {{ruleHitDistributes.ruleInstanceName}}
                    </div>
                </td>
                <td class="hitcount tdis">
                    <div class="tdi" ng-repeat="ruleHitDistributes in solutionHitDistributes.ruleHitDistribute">
                        {{ruleHitDistributes.ruleHitCount}}
                    </div>
                </td>

            </tr>
            </tbody>-->
            <tbody ng-repeat="riskResult in riskScenarioListResults">
            <tr>
                <td rowspan="{{riskResult.solutionHitDistribute.length+1}}">{{riskResult.scenarioInstanceName}}</td>
            </tr>
            <tr ng-repeat="solutionHitDistributes in riskResult.solutionHitDistribute">
                <td>{{solutionHitDistributes.solutionInstanceName}}</td>
                <td class="hitcount tdis">{{solutionHitDistributes.ruleHitCount}}</td>
            </tr>
            </tbody>
        </table>
        <table ng-if="!flag && !warnFlag" class="ud_table ud_table_C rm_table_bordered">
            <thead>
            <tr>
                <th>规则ID</th>
                <th>规则名称</th>
                <th>命中规则次数（次）</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="riskRuleListResult in riskRuleListResults">
                <td>{{riskRuleListResult.ruleInstanceCode}}</td>
                <td>{{riskRuleListResult.ruleInstanceName}}</td>
                <td class="hitcount">{{riskRuleListResult.total}}</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

