<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <meta http-equiv="Access-Control-Allow-Origin" content="*" />
    <meta http-equiv="X-UA-Compatible" content="IE=8">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">
</head>
<body>
    <div id="step1" class="step" style="max-height:1200px;height:1200px;">
        <div id="showEnd">v3</div>
        <div class="front" >
            <input id="upload1" class="upload-input" capture="camera" accept="image/*" type="file" name="" value="" >
        </div>
        <div class="line20"></div>
        <div id="log"></div>
    </div>
    <script src="./js/jquery.min.js"></script>
    <script type="text/javascript">
        // var old;
        // function bind(){
        //     $("#upload1").bind("change",function(event) {
        //         if(this.files[0]==old){show("相同")}
        //         old=this.files[0];
        //         show("lastModified:"+this.files[0].lastModified)
        //         // clearInputFile();
        //     });
        // }
        function show(str){
            $("#log").html(str+"<br>"+$("#log").html());
        }
        // function clearInputFile(){
        //     var file=$("#upload1");
        //     file.unbind();
        //     file.after(file.clone().val(""));
        //     file.remove();

        //     bind();
        // }
        // bind();
        document.getElementById('upload1').addEventListener('change', function() {
          var upload = document.getElementById('upload1'); //每次要动态获取
          var file = upload.files[0];
          show(file.lastModified);

          //解决上传相同文件不触发onchange事件
          var clone = upload.cloneNode(true);
          clone.onchange = arguments.callee; //克隆不会复制动态绑定事件
          clone.value = '';
          upload.parentNode.replaceChild(clone, upload);
        }, false);
    </script>
</body>
</html>
